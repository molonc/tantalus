{% extends "tantalus/base_view.html" %}
{% load staticfiles %}

{% block title %}
    File Transfer: {{ transfer.name }}
{% endblock %}

{% block body %}
    <div class="container" style="padding:0; margin-bottom:5px;">
            <h4 style="float:left;">FileTransfer Details</h4>
    </div>
    <div class="container" style="background-color:#F5F5F5;">
        <table class="table-condensed">
            <tbody>
                <tr><th id="thid">Name:</th><td id="tdid">{{ transfer.name }}</td></tr>
                <tr><th id="thid">Tag:</th><td id="tdid">{{ transfer.tag_name }}</td></tr>
                <tr><th id="thid">From:</th><td id="tdid">{{ transfer.from_storage }}</td></tr>
                <tr><th id="thid">To:</th><td id="tdid">{{ transfer.to_storage }}</td></tr>
                <tr><th id="thid">Running:</th><td id="tdid">{{ transfer.running }}</td></tr>
                <tr><th id="thid">Finished:</th><td id="tdid">{{ transfer.finished }}</td></tr>
                <tr><th id="thid">Success:</th><td id="tdid">{{ transfer.success }}</td></tr>
                <tr><th id="thid">State:</th><td id="tdid">{{ transfer.state }}</td></tr>
                <tr><th id="thid" valign="top">Message:</th><td id="tdid"><pre>{{ transfer.message }}</pre></td></tr>
            </tbody>
        </table>
        <a class="btn btn-primary btn-sm" style=" margin: auto;margin-top:5px; margin-bottom: 10px;" href={% url 'filetransfer-start' pk=transfer.pk %}>Start File Transfer</a>

    <br />
    {% if std %}

    <div class="container" style="padding:0; margin-bottom:5px;">
        <table>
            <tr>
                <td><h4>Task Standard Output</h4></td>
            </tr>
        </table>
    </div>

    <div class="col-md-12 well" style=" padding:0; margin-bottom:5px; height:300px; overflow:scroll; resize: both;">
        <pre><code>{% for line in std %}{{line}}{% endfor %}</code></pre>
    </div>

    <span class="step-links pagination">
        {% if std.has_previous %}
        <a class="btn btn-primary btn-sm" href="?page={{ std.previous_page_number }},{{ err.number }}"> previous </a>
        {% endif %}
        <span class="current">
            Page {{ std.number }} of {{ std.paginator.num_pages }}
        </span>
        {% if std.has_next %}
        <a class="btn btn-primary btn-sm" href="?page={{ std.next_page_number }},{{ err.number }}"> next </a>
        {% endif %}
    </span>
    {% endif %}

    {% if std.has_next %}
    <a class="btn btn-primary btn-sm" href="{{ pk }}/detail">Detail</a>
    {% endif %}

    {% if err %}

    <div class="container" style="padding:0; margin-bottom:5px;">
        <table>
            <tr>
                <td><h4>Task Standard Error</h4></td>
            </tr>
        </table>
    </div>

    <div class="col-md-12 well" style=" padding:0; margin-bottom:5px; height:300px; overflow:scroll; resize: both;">
        <pre><code>{% for line in err %}{{line}}{% endfor %}</code></pre>
    </div>

    <span class="step-links pagination">
        {% if err.has_previous %}
        <a a class="btn btn-primary btn-sm" href="?page={{ std.number }},{{ err.previous_page_number }}"> previous </a>
        {% endif %}
        <span class="current">
            Page {{ err.number }} of {{ err.paginator.num_pages }}
        </span>
        {% if err.has_next %}
        <a class="btn btn-primary btn-sm" href="?page={{ std.number }},{{ err.next_page_number }}"> next </a>
        {% endif %}
    </span>

    {% if err.has_next %}
    <a class="btn btn-primary btn-sm" href="{{ pk }}/detail">Detail</a>
    {% endif %}

    {% endif %}

    </div>


{% endblock %}

