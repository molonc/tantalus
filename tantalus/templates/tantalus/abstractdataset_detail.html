{% extends "tantalus/base_view.html" %}
{% load staticfiles %}

{% block title %}
    Dataset Detail
{% endblock %}

{% block body %}
    <div class="container" style="padding:0; margin-bottom:5px;">
    </div>
    <div class="container" style="background-color:#F5F5F5;">
        <table class="table-condensed">
            <tr>
                <td class="td_name">File Resources: </td>
                <td>
                    {% for file_resource in object.get_file_resources %}
                        {{ file_resource.filename }}<br/>
                    {% endfor %}
                </td>
            </tr>
            <tr>
                <td class="td_name">Libraries: </td>
                <td>
                {% for library in object.get_libraries %}
                    {{ library }} 
                {% endfor %}
                </td>
            </tr>
            <tr>
                <td class="td_name">Samples: </td>
                <td>
                {% for sample in object.get_samples %}
                    <a href="{% url 'sample-detail' sample.id %}">{{ sample.sample_id }} </a>
                {% endfor %}
                </td>
            </tr>
            <tr>
                <td valign="top" class="td_name">Available on: </td>
                <td>
                    {% for s in storages  %}
                        {% if s.get_storage_directory %}
                          <h5 style="color: #212121" align="left" > {{ s.name }} - <i>{{ s.server_ip }}</i> </h5>
                                {% for file_resource in object.get_file_resources %}
                                    {% for i in file_resource.fileinstance_set.all %}
                                        {% if i.storage|stringformat:"s" == s.name|stringformat:"s" %}
                                            {{ i.get_filepath }}
                                        {% endif %}
                                    {% endfor %}
                                {% endfor %}
                        {% else %}
                          <h5 style="color: #212121" align="left" > Storage account:{{ s.storage_account }} | Container:{{ s.storage_container }}</h5>
                            {% for file_resource in object.get_file_resources %}
                                {{ file_resource.filename }}<br/>
                            {% endfor %}
                        {% endif %}
                        <br>
                    {% endfor %}
                </td>
            </tr>
            <tr>
                <td class="td_name">Tags: </td>
                <td>
                {%  for tag in object.tags.all %}
                    <p><a href="{% url 'tag-detail' tag.id %}">{{tag.name}}</a></p>
                {% endfor %}
            </tr>
        </table>
    </div>


{% endblock %}